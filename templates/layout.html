{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Resonance{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{% static 'css/global.css' %}" />
    {% block head %}{% endblock %}
  </head>
  <body class="min-h-screen bg-[#121212] font-lato text-white">
    <div class="flex">
      <!-- Sidebar -->
      <aside class="fixed h-screen w-64 flex flex-col border-r border-white/10 bg-[#121212] backdrop-blur-xl">
        <!-- Logo Section -->
        <div class="p-6 border-b border-white/10">
          <div class="flex items-center gap-3">
            <img
              src="{% static 'images/logo.png' %}"
              alt="Resonance Logo"
              class="h-10 w-10"
            />
            <h1 class="text-xl font-bold tracking-tight">Resonance</h1>
          </div>
        </div>

        <!-- Navigation Links -->
        <nav class="flex-1 p-4 space-y-2">
          
          <!-- Discover Link -->
          <a
            href="{% url 'match_user' %}"
            class="w-full h-12 px-4 flex items-center justify-start gap-3 text-base rounded-lg transition-colors {% if request.resolver_match.url_name == 'match_user' %}bg-gray-700 text-white shadow-lg{% else %}text-gray-400 hover:bg-gray-800 hover:text-white{% endif %}"
          >
            <svg fill="currentColor" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6">
              <path fill-rule="evenodd" d="M11.1758045,11.5299649 C11.7222481,10.7630248 11.6612694,9.95529555 11.2823626,8.50234466 C10.5329929,5.62882187 10.8313891,4.05382867 13.4147321,2.18916004 L14.6756139,1.27904986 L14.9805807,2.80388386 C15.3046861,4.42441075 15.8369398,5.42670671 17.2035766,7.35464078 C17.2578735,7.43122022 17.2578735,7.43122022 17.3124108,7.50814226 C19.2809754,10.2854144 20,11.9596204 20,15 C20,18.6883517 16.2713564,22 12,22 C7.72840879,22 4,18.6888043 4,15 C4,14.9310531 4.00007066,14.9331427 3.98838852,14.6284506 C3.89803284,12.2718054 4.33380946,10.4273676 6.09706666,8.43586022 C6.46961415,8.0150872 6.8930834,7.61067534 7.36962714,7.22370749 L8.42161802,6.36945926 L8.9276612,7.62657706 C9.30157948,8.55546878 9.73969716,9.28566491 10.2346078,9.82150804 C10.6537848,10.2753538 10.9647401,10.8460665 11.1758045,11.5299649 Z M7.59448531,9.76165711 C6.23711779,11.2947332 5.91440928,12.6606068 5.98692012,14.5518252 C6.00041903,14.9039019 6,14.8915108 6,15 C6,17.5278878 8.78360021,20 12,20 C15.2161368,20 18,17.527472 18,15 C18,12.4582072 17.4317321,11.1350292 15.6807305,8.66469725 C15.6264803,8.58818014 15.6264803,8.58818014 15.5719336,8.51124844 C14.5085442,7.0111098 13.8746802,5.96758691 13.4553336,4.8005211 C12.7704786,5.62117775 12.8107447,6.43738988 13.2176374,7.99765534 C13.9670071,10.8711781 13.6686109,12.4461713 11.0852679,14.31084 L9.61227259,15.3740546 L9.50184911,13.5607848 C9.43129723,12.4022487 9.16906461,11.6155508 8.76539217,11.178492 C8.36656566,10.7466798 8.00646835,10.2411426 7.68355027,9.66278925 C7.65342985,9.69565638 7.62374254,9.72861259 7.59448531,9.76165711 Z" />
            </svg>
            <span>Discover</span>
          </a>

          <!-- Matches Link -->
          <a
            href="{% url 'match_list' %}"
            class="w-full h-12 px-4 flex items-center justify-start gap-3 text-base rounded-lg {% if request.resolver_match.url_name == 'match_list' %}bg-gray-700 text-white shadow-lg{% else %}text-gray-400 hover:bg-gray-800 hover:text-white{% endif %} transition-colors"
          >
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z" />
            </svg>
            <span>My Matches</span>
          </a>
          
          <!-- Chat Link -->
          <a
            href="{% url 'chat_page' %}"
            class="w-full h-12 px-4 flex items-center justify-start gap-3 text-base rounded-lg {% if request.resolver_match.url_name == 'chat_page' %}bg-gray-700 text-white shadow-lg{% else %}text-gray-400 hover:bg-gray-800 hover:text-white{% endif %} transition-colors"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-circle-icon lucide-message-circle"><path d="M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719"/></svg>
            <span>Chat</span>
          </a>

          <!-- Admin Dashboard Link -->
          {% if current_user.is_admin %}
          <a
            href="{% url 'admin_dashboard' %}"
            class="w-full h-12 px-4 flex items-center justify-start gap-3 text-base rounded-lg {% if request.resolver_match.url_name == 'admin_dashboard' %}bg-gray-700 text-white shadow-lg{% else %}text-gray-400 hover:bg-gray-800 hover:text-white{% endif %} transition-colors"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="25"
              height="25" viewBox="0 0 25 25" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shield-check"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="m9 12 2 2 4-4"/></svg>
            <span>Admin Dashboard</span>
          </a>
          {% endif %}
          
          <!-- Profile Link -->
          {% if user.is_authenticated %}
            <a
              href="{% url 'profile_detail' user.spotify_id %}"
              class="w-full h-12 px-4 flex items-center justify-start gap-3 text-base rounded-lg {% if request.resolver_match.url_name == 'profile_detail' %}bg-gray-700 text-white shadow-lg{% else %}text-gray-400 hover:bg-gray-800 hover:text-white{% endif %} transition-colors"
            >
              {% if current_user.profile_picture %}
                <img
                  src="{{ current_user.profile_picture.url }}"
                  alt="Profile"
                  class="w-8 h-8 rounded-full object-cover"
                />
              {% else %}
                <span class="w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                    </svg>
                </span>
              {% endif %}
              <span>Profile</span>
            </a>
          {% else %}
            <a
              href="{% url 'spotify_login'%}"
              class="w-full h-12 px-4 flex items-center justify-start gap-3 text-base rounded-lg text-gray-400 hover:bg-gray-800 hover:text-white transition-colors"
            >
              <svg class="w-8 h-8 p-1 rounded-full bg-gray-800" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
              </svg>
              <span>Login</span>
            </a>
          {% endif %}
        </nav>

        <!-- Footer -->
        <div class="p-4 border-t border-white/10 mt-auto">
            <div class="text-xs text-gray-400 text-center">
              <p class="font-medium">Find your vibe</p>
              <p class="mt-1">Match through music</p>
            </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="ml-64 flex-1">
        {% block content %}{% endblock %}
      </main>
    </div>

    {% block script %}{% endblock %}
  </body>
</html>